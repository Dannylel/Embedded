/*
 * main.c
 *
 *  Created on: Feb 21, 2020
 *      Author: Dan
 */
#include"../Lib/Std_types.h"
#include"../Lib/Bit_math.h"
#include"DIO_int.h"
#include"Keypad_int.h"
#include"Lcd_int.h"
#include"Login_int.h"
#undef F_CPU
#define F_CPU 8000000
#include<util/delay.h>
#include<avr/io.h>

int main(void){
	u8 key,x,i;
	u8 id[3];
	u8 pass[3];
	u8 id1[3]={'d','a','n'};
	u8 id2[3]={'m','a','n'};
	u8 id3[3]={'c','a','b'};
	u8 pass1[3]={2,2,5};
	u8 pass2[3]={3,2,7};
	u8 pass3[3]={8,6,9};
	u8 loc=0x80;
	Dio_vidSetPinDir(DIO_u8PIN_0,DIO_u8INPUT);
	Dio_vidSetPinVal(DIO_u8PIN_0,DIO_u8HIGH); //pullup resistor
	Lcd_vidInit();
	while(1){
		x=PINA;
		if(x==1){
			for(i=0; i<3; i++){
				Lcd_vidSendCommand(loc);
				key=Keypad_u8GetKey();
				if((key!='=')&&(key!='#')){
					if(key==1){
						id[i]='a';
						Lcd_vidWriteChar('a');
					}
					else if(key==2){
						id[i]='b';
						Lcd_vidWriteChar('b');
					}
					else if(key==3){
						id[i]='c';
						Lcd_vidWriteChar('c');
					}
					else if(key=='+'){
						id[i]='d';
						Lcd_vidWriteChar('d');
					}
					else if(key==4){
						id[i]='e';
						Lcd_vidWriteChar('e');
					}
					else if(key==5){
						id[i]='f';
						Lcd_vidWriteChar('f');
					}
					else if(key==6){
						id[i]='g';
						Lcd_vidWriteChar('g');
					}
					else if(key=='-'){
						id[i]='h';
						Lcd_vidWriteChar('h');
					}
					else if(key==7){
						id[i]='i';
						Lcd_vidWriteChar('i');
					}
					else if(key==8){
						id[i]='j';
						Lcd_vidWriteChar('j');
					}
					else if(key==9){
						id[i]='k';
						Lcd_vidWriteChar('k');
					}
					else if(key=='*'){
						id[i]='l';
						Lcd_vidWriteChar('l');
					}
					else if(key==0){
						id[i]='m';
						Lcd_vidWriteChar('m');
					}
					else if(key=='/'){
						id[i]='n';
						Lcd_vidWriteChar('n');
					}
				}
				loc+=0x01;
			}
			key=Keypad_u8GetKey();
			while(key!='='){
				key=Keypad_u8GetKey();
			}
		}

		else if(x==0){
			for(i=0; i<3; i++){
				key=Keypad_u8GetKey();
				if((key!='=')&&(key!='#')&&(key!='+')&&(key!='*')&&(key!='/')&&(key!='-')){
					if(key==0){
						pass[i]=key;
						Lcd_vidWriteChar(key+'0');
					}
					else if(key==1){
						pass[i]=key;
						Lcd_vidWriteChar(key+'0');
					}
					else if(key==2){
						pass[i]=key;
						Lcd_vidWriteChar(key+'0');
					}
					else if(key==3){
						pass[i]=key;
						Lcd_vidWriteChar(key+'0');
					}
					else if(key==4){
						pass[i]=key;
						Lcd_vidWriteChar(key+'0');
					}
					else if(key==5){
						pass[i]=key;
						Lcd_vidWriteChar(key+'0');
					}
					else if(key==6){
						pass[i]=key;
						Lcd_vidWriteChar(key+'0');
					}
					else if(key==7){
						pass[i]=key;
						Lcd_vidWriteChar(key+'0');
					}
					else if(key==8){
						pass[i]=key;
						Lcd_vidWriteChar(key+'0');
					}
					else if(key==9){
						pass[i]=key;
						Lcd_vidWriteChar(key+'0');
					}


				}
				loc+=0x01;
			}
			key=Keypad_u8GetKey();
			while(key!='='){
				key=Keypad_u8GetKey();
			}
		}
	}
	return 0;
}


